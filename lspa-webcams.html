<!doctype html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Juschwy</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="https://i.scdn.co/image/ab6775700000ee8542a26560309f4551e4bf4034">
    <style>
        .webcam{
            height: 200px;
        }
    </style>
</head>
<body>
    <header>
        <div class="verticalList">
            <img src="https://i.scdn.co/image/ab6775700000ee8542a26560309f4551e4bf4034" alt="Logo">
            <h1>JUSCHWY</h1>
        </div>
        <nav>
            <a href="/index">Start</a>
            <a href="/projects">Projects</a>
        </nav>
    </header>
    <main>
        <div>
            <h1>LSPA-Webcams</h1>
            <button id="monitoring-btn" onclick="toggleMonitoring()">Start Monitoring</button><br>
            <img class="webcam" id="webcam-west" src="https://camwest.cumulus-segelflug.ch/snapshot.cgi" alt="LSPA-Webcam-West">
            <img class="webcam" id="webcam-ost" src="https://camost.cumulus-segelflug.ch/snapshot.cgi" alt="LSPA-Webcam-Ost">
            <img class="webcam" id="webcam-nord" src="https://camnord.cumulus-segelflug.ch/snap.jpeg" alt="LSPA-Webcam-Nord">
        </div>
        <script>
            const monitoringBtn = document.querySelector("#monitoring-btn");
            const webcamWest = document.querySelector("#webcam-west");
            const webcamOst = document.querySelector("#webcam-ost");
            const webcamNord = document.querySelector("#webcam-nord");
            let intervallId;

            function refreshImage(imgElement, imgURL) {
                // create a new timestamp 
                const timestamp = new Date().getTime();

                const queryString = "?t=" + timestamp;

                imgElement.src = imgURL + queryString;
            }   

            function toggleMonitoring(){
                if(intervallId){
                    clearInterval(intervallId);
                    monitoringBtn.innerHTML = "Start Monitoring"
                }
                else{
                    monitoringBtn.innerHTML = "Stop Monitoring";
                    intervallId = setInterval(() => {
                        console.log("Actualizing Images");
                        refreshImage(webcamWest, "https://camwest.cumulus-segelflug.ch/snapshot.cgi");
                        refreshImage(webcamOst, "https://camost.cumulus-segelflug.ch/snapshot.cgi");
                        refreshImage(webcamNord, "https://camnord.cumulus-segelflug.ch/snap.jpeg");
                    }, 1000);
                
                }
            }
        </script>
    </main>
    <footer>
        <p> Â©JUSCHWY</p>
        <div class="vertivalList">
            <a href="/rickTheRoll">Impressum</a>
            <a href="/rickTheRoll">Kontakt</a>
        </div>
    </footer>
</body>

</html>