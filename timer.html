<!doctype html>
<html lang="de">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Juschwy</title>
        <link rel="stylesheet" href="style.css">
        <link rel="shortcut icon" href="https://i.scdn.co/image/ab6775700000ee8542a26560309f4551e4bf4034">
    </head>
    <body>
        <header>
            <div class="verticalList">
                <img src="https://i.scdn.co/image/ab6775700000ee8542a26560309f4551e4bf4034" alt="Logo">
                <h1>JUSCHWY - Date-Time-Timer</h1>
            </div>
            <nav>
                <a href="./index.html">Start</a>
                <a href="./projects.html">Projects</a>
            </nav>
        </header>
        <main>
            <div>
                <h1>Date-Time-Timer</h1>
                <h1 id="timer-display">00.00.0000 00:00:00.000</h1>
                <input id="datetime-input" type="datetime-local">
                <button id="start-btn">Start Timer</button>
                <script>
                    const datetimeInput = document.querySelector("#datetime-input");
                    const timerDisplay = document.querySelector("#timer-display");
                    const startBtn = document.querySelector("#start-btn");
                    let intervallId;

                    startBtn.addEventListener("click", () => {
                        if(intervallId){
                            clearInterval(intervallId);
                        }
                        const datetime = new Date(datetimeInput.value);

                        function calcDiff(){
                            const now = Date.now();
                            const diff = new Date(datetime - now);
                            timerDisplay.innerHTML = get0Before((diff.getDate() -1)) + "." + get0Before(diff.getMonth())  + "." + get0Before((diff.getFullYear() - 1970), 4)  + " " + diff.toISOString().substr(11, 12);
                        }

                        calcDiff();

                        intervallId = setInterval(() => {
                            calcDiff();
                        }, 30);
                        
                    })

                    function get0Before(number, zeros = 2){
                        return ("0000000" + number).slice(-(zeros));
                    }
                </script>
            </div>
        </main>
        <footer>
            <p>Â©JUSCHWY</p>
            <div class="vertivalList">
                <a href="./rickTheRoll.html">Impressum</a>
                |
                <a href="./rickTheRoll.html">Kontakt</a>
            </div>
        </footer>
    </body>
</html>
